(this.webpackJsonpphonebook=this.webpackJsonpphonebook||[]).push([[0],{38:function(e,n,t){},39:function(e,n,t){"use strict";t.r(n);var c=t(14),a=t.n(c),r=t(3),o=t(1),u=t(0),i=function(e){var n=e.search,t=e.handleFilter;return Object(u.jsxs)("div",{children:["Search by name: ",Object(u.jsx)("input",{value:n,onChange:t})]})},s=function(e){var n=e.handleSubmit,t=e.handleChange,c=e.handleNumber,a=e.newName,r=e.newNumber;return Object(u.jsxs)("form",{onSubmit:n,children:[Object(u.jsxs)("div",{children:["Name: ",Object(u.jsx)("input",{value:a,onChange:t})]}),Object(u.jsxs)("div",{style:{padding:"0.5rem 0"},children:["Number: ",Object(u.jsx)("input",{value:r,onChange:c})]}),Object(u.jsx)("button",{type:"submit",children:"Add"})]})},l=function(e){var n=e.persons,t=e.handleDelete;return Object(u.jsx)("ul",{children:n.map((function(e){return Object(u.jsxs)("li",{children:[e.name," ",e.number,Object(u.jsx)("button",{onClick:function(){return t(e)},children:"Delete"})]},e.id)}))})},d=function(e){var n=e.message,t=e.type;return null===n?null:Object(u.jsx)("div",{className:"".concat("success"===t?"notification":"error"),children:n})},b=t(4),j=t.n(b),h="/api/persons",f={create:function(e){return j.a.post(h,e).then((function(e){return e.data}))},getAll:function(){return j.a.get(h).then((function(e){return e.data}))},deletePerson:function(e){return j.a.delete("".concat(h,"/").concat(e)).then((function(e){return e.data}))},updateNumber:function(e,n){return j.a.put("".concat(h,"/").concat(e),n).then((function(e){return e.data}))}},m=function(){var e=Object(o.useState)([]),n=Object(r.a)(e,2),t=n[0],c=n[1],a=Object(o.useState)(""),b=Object(r.a)(a,2),j=b[0],h=b[1],m=Object(o.useState)(""),O=Object(r.a)(m,2),p=O[0],v=O[1],x=Object(o.useState)(""),g=Object(r.a)(x,2),w=g[0],N=g[1],S=Object(o.useState)(null),y=Object(r.a)(S,2),C=y[0],k=y[1],A=Object(o.useState)(""),D=Object(r.a)(A,2),P=D[0],T=D[1];Object(o.useEffect)((function(){f.getAll().then((function(e){c(e)})).catch((function(e){console.log(e)}))}),[]);return Object(u.jsxs)("div",{children:[Object(u.jsx)("h2",{children:"Phonebook"}),Object(u.jsx)(d,{message:C,type:P}),Object(u.jsx)(i,{search:w,handleFilter:function(e){N(e.target.value);var n=t.filter((function(e){return e.name.toLowerCase().includes(w.toLowerCase())}));c(n)}}),Object(u.jsx)("h2",{children:"Add someone"}),Object(u.jsx)(s,{newName:j,newNumber:p,handleChange:function(e){h(e.target.value)},handleNumber:function(e){v(e.target.value)},handleSubmit:function(e){e.preventDefault();var n={name:j,number:p},a=t.find((function(e){return e.name===j}));a?window.confirm("".concat(j," already exists. Replace old number with a new one?"))&&f.updateNumber(a.id,n).then((function(e){c(t.map((function(n){return n.id!==a.id?n:e}))),h(""),v(""),T("success"),k("Changed number for ".concat(a.name)),setTimeout((function(){k(null),T("")}),5e3)})).catch((function(e){T("error"),k("Information about ".concat(a.name," has already been removed from server")),setTimeout((function(){k(null),T("")}),5e3),console.log(e)})):f.create(n).then((function(e){c(t.concat(e)),h(""),v(""),T("success"),k("Added ".concat(e.name)),setTimeout((function(){k(null),T("")}),5e3)})).catch((function(e){console.log(e)}))}}),Object(u.jsx)("h2",{children:"Numbers"}),Object(u.jsx)(l,{persons:t,handleDelete:function(e){window.confirm("Do you want to delete ".concat(e.name,"?"))&&f.deletePerson(e.id).then((function(n){c(t.filter((function(n){return n.id!==e.id})))}))}})]})};t(38);a.a.render(Object(u.jsx)(m,{}),document.getElementById("root"))}},[[39,1,2]]]);
//# sourceMappingURL=main.b86f02be.chunk.js.map